# 仮想コラボレーションとペアプログラミング

※ オリジナル: https://microsoft.github.io/code-with-engineering-playbook/agile-development/collaboration/virtual-collaboration/

ペアプログラミングは、ほとんどの大規模なエンジニアリング組織が「ハンズオンキーボード」コーディングに使用する事実上の作業方法です。2人の開発者が同期して作業し、同じ画面を見て、一緒にコーディングと設計を試みます。これにより、どちらかが個別に作成するよりも優れた、より明確なコードが得られることがよくあります。

ペアプログラミングは正しい状況下ではうまく機能しますが、完全に仮想化された設定で実行すると、その魅力の一部が失われます。仮想セットアップには、2人の開発者が同じ画面を見てデザインを話し合うことが含まれますが、ラグ、マイクセットアップの問題、ワークスペースと個人的な考慮事項、その他多くの小さな、個別に些細な問題など、対処すべきロジスティックの問題がしばしばあります。経験を悪化させます。

仮想作業のパターンは、私たちが慣れている対面のパターンとは異なります。コアとなるペアプログラミングは、次の原則に基づいています。:

1. コミュニケーションを通じて明快さを生み出す
2. コラボレーションを通じてより高い品質を生み出す
3. 平等な貢献による所有権の創出

ペアプログラミングは、これらの結果を達成するための1つの方法です。Red Team Testing（RTT）は、同じ原則を使用する代替プログラミング方法ですが、仮想作業方法が提供するいくつかの利点があります。

## レッドチームテスト

Red Team Testingは、侵入テストの「RedTeam」および「BlueTeam」パラダイムからその名前を借りており、仮想的に共同で並行して作業する方法です。Red Team Testingでは、2人の開発者が共同でプログラムのインターフェイス、アーキテクチャ、および設計を決定し、実装フェーズに分けます。ある開発者は、パブリックインターフェイスを使用してテストを作成し、エッジケーステスト、入力検証、またはその他の方法でインターフェイスのストレステストを実行しようとします。2番目の開発者は、最終的にテストされる実装を同時に作成しています。

Red Team Testingには、他のテスト駆動開発ライフサイクルと同じ哲学があります。すべての実装はインターフェイスから分離されており、実装の知識がなくてもインターフェイスをテストできます。

![ptt-diagram](images/PTTdiagram.PNG)

## 手順

1. 設計段階：両方の開発者が一緒にインターフェースを設計します。これには次のものが含まれます。
    * メソッドのシグネチャと名前
    * メソッドの目的に関するドキュメントまたはドキュメント文字列の記述。
    * テストに影響を与えるアーキテクチャの決定（ファクトリパターンなど）

2. 実装フェーズ：開発者は、コミュニケーションを継続しながら、作業を分離して並列化します。
    * 開発者Aは、以前に決定された設計に従って、メソッドの実装を設計します。
    * 開発者Bは、実装の詳細を知らなくても、同じメソッドシグネチャのテストを同時に作成します。

3. 統合とテストのフェーズ：両方の開発者がコードをコミットしてテストを実行します。
    * ユートピアシナリオ：すべてのテストが実行され、正しく合格します。
    * 現実的なシナリオ：テストの欠陥により、テストが失敗または失敗しました。これにより、設計がさらに明確になり、テストが失敗した理由が説明されます。

4. 開発者は、コードが機能してテストされるまで、3つのフェーズを繰り返します。

## RTT戦略に従う時期

RTTは、特定の状況でうまく機能します。コラボレーションを仮想的に行う必要があり、すべての通信が仮想である場合、RTTは、共同設計セッションの利点を維持しながら、継続的な通信の必要性を減らします。これは人的要素を考慮しています。仮想コミュニケーションは、人とのコミュニケーションよりも疲れます。

RTTは、コードがどのような目的で機能するかについて、完全なコンセンサスがある場合、またはコンセンサスがまったくない場合にもうまく機能します。共同で設計を作成し、それに対して実装およびテストすることに同意することはRTTメソッドの一部であるため、RTTは反復と通信を通じて強制的に明確さを作成します。

## 利点

RTTには、ペアプログラミングやテスト駆動開発と同じ利点がたくさんありますが、仮想設定用に更新しようとします。

* コードの実装とテストは、並行して、長距離にわたって、またはタイムゾーン全体で実行できるため、コードの記述を完了するのにかかる全体的な時間が短縮されます。

* RTTはペアプログラミングパラダイムを維持しながら、ビデオ通信や開発者間の継続的な通信の必要性を減らします。

* RTTを使用すると、コードを実装する前に設計とエンジニアリングの調整に詳細に焦点を当てることができるため、インターフェイスがよりクリーンでシンプルになります。

* RTTは、テストをコードの実装に従わせたり、コードの実装に影響を与えたりするのではなく、実装と並行してテストを優先することを推奨しています。

* 実装フェーズでは、実装者とテスターの両方が正しい最新のドキュメントを必要とするため、ドキュメントは本質的にRTTの一部です。

## RTTがうまく機能するために必要なもの

* 絶え間ないコミュニケーションと優れたチームワークへの要求は、課題をもたらす可能性があります。チームメンバー間の毎日の更新は、さまざまなコード要件への整合性を維持するために不可欠です。

* コードの設計とテスト戦略の明確さを事前に確立し、参照として文書化する必要があります。確立された設計が欠如していると、2つの主要な作業の間に不整合が生じ、時間のかかるリファクタリングが必要になります。

* 1人の開発者だけが全体的な設計の知識を持っている場合、RTTはうまく機能しません。RTTに関与するすべての開発者が同じページにいることを保証するには、チームのコミュニケーションが重要です。