# 2. SerilogおよびApplicationInsightsを使用したアプリレベルのロギング

日付: 2020-04-08

## スターテス

承認済み

## 環境

プラットフォームのマイクロサービス設計により、使用状況、パフォーマンス、エラーなどの追跡をエンドツーエンドで実行できるように、各サービス全体でログの一貫性を確保する必要があります。これを実現するために、可能な場合は単一のロギング/モニタリングフレームワークを使用する必要がありますが、後の段階で他のツールに統合/エクスポートするための柔軟性を確保します。開発者は、メッセージとメトリックをログに記録するためのシンプルなインターフェイスを備えている必要があります。

## 決断

Serilogをアプリケーションレベルで選択するDotnetLoggingフレームワークとして利用し、分析のためにLogAnalyticsおよびApplicationInsightsに統合することに同意しました。

## 結果

サンプリングは、数百万のメッセージを取り込むときに過度に高価にならないように、また重要な情報のキャプチャを妨げないように、ApplicationInsightsで構成する必要があります。チームは、ノイズと不要なレベルのサンプリングを減らすために、設計レビューの一部として監視に不可欠であると合意されたものだけをログに記録する必要があります。
