# スモークテスト

※ オリジナル: https://microsoft.github.io/code-with-engineering-playbook/automated-testing/smoke-testing/

スモークテストは、"**Sanity**"、"**Acceptance**"、もしくは"**Build/Release Verification**"テストと呼ばれることもあり、システム/機能テストのサブタイプであり、通常、準備段階としてアプリケーションの準備ができていることを検証するゲートとして使用されます。アプリケーションがスモークテストに合格した場合、テストまたは展開の次の段階で許容できるか、十分に安定した状態です。

## いつ使用するか

### 対処された問題

スモークテストは、アプリケーションが機能しているかどうかをできるだけ早く見つけることを目的としています。スモークテストの目標は時間を節約することです。アプリケーションの現在のバージョンがスモークテストに合格しない場合、そのアプリケーションの残りの統合またはデプロイメントチェーンを放棄することができます。スモークテストは、完全な機能をカバーすることを目的とはしていませんが、代わりに、アプリケーションが常に正しく応答する必要があるいくつかの迅速な受け入れ呼び出しに焦点を当てています。

### ROIの転換点

スモークテストは最も重要なアプリケーションパスのみを対象としているため、実行時間と複雑さを最小限に抑えながら、アプリケーションの動作を実際にテストするために使用しないでください。テストは、アプリケーションの統合テストまたはe2eテストのサブセットで構成でき、必要なだけの深さで機能の多くをカバーします。

優れたスモークテストの黄金律は、より優れた、より徹底的なテストが開始される段階でアプリケーションが受け入れ可能であることを検証する時間を節約することです。

### 適用可能

- [x] **ローカル開発デスクトップ** - *例:* 手動のスモークテストを適用して、アプリケーションに問題がないことを確認します。.
- [x] **パイプラインの構築** - *例:* ストの全範囲を実行する前に、統合テストスイートの小さなセットを実行します。これには長い時間がかかる場合があります。
- [x] **非本番環境と本番環境のデプロイ** - *例:* リソースを消費する負荷テストを実行する前に、製品のAPIに対してcurlコマンドを実行し、応答をアサートすると200になります。
- [x] **PR 検証** - *例:* - アプリケーションチャートをテスト名前空間にデプロイし、リリースを検証することは成功し、即時のリグレッションはマージされません。

## 結論

スモークテストは、より信頼性の高いソフトウェアを出荷するための、労力と影響が少ないステップです。継続的インテグレーションおよびデリバリーシステムを計画する際に実装する最初の段階の1つとして検討する必要があります。

## 参考資料

- [Wikipedia - スモークテスト](https://en.wikipedia.org/wiki/Smoke_testing_(software))
- [Google SRE Book - システムテスト](https://landing.google.com/sre/sre-book/chapters/testing-reliability/#system-tests)
