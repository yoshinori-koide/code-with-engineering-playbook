# ユニットテストを行う理由

※ オリジナル: https://microsoft.github.io/code-with-engineering-playbook/automated-testing/unit-testing/why-unit-tests/

単体テストを書くのが難しく、うまく書くのがさらに難しいことは周知の事実です。単体テストを作成すると、すべての機能の開発時間も長くなります。では、なぜわざわざそれらを書く必要があるのでしょうか。

## コストを削減

後でバグが見つかったほど、修正に費用がかかることは間違いありません。特に、バグが本番環境に移行した場合はそうです。[IBMによる2008年の調査研究](ftp://ftp.software.ibm.com/software/rational/info/do-more/RAW14109USEN.pdf)による と、本番環境で検出されたバグは、実装中に検出された場合の6倍のコストがかかる可能性があります。

## 開発者の信頼を高める

開発者が行う多くの変更は、大きな機能ではなく、テストスイート全体を必要とするものでもありません。強力なユニットテストスイートは、開発者の変更によってダウンストリームのバグが発生しないという開発者の信頼を高めるのに役立ちます。ユニットテストを行うことは、安全であることが証明できる機械的なリファクターを作成するのにも役立ちます。リファクタリングツールなどを使用して機械的なリファクタリングを実行し、リファクタリングされたコードをカバーする単体テストを実行することで、コミットの信頼性を高めることができます。

## 開発をスピードアップ

単体テストは書くのに時間がかかりますが、開発もスピードアップしますか？これは撞着語のように見えるかもしれませんが、単体テストスイートの強みの1つです。時間の経過とともに、テス​​トが開発者のワークフローの重要な部分になるまで、成長と進化を続けます。

開発者が利用できる唯一のテストが、長時間実行されるシステムテスト、展開を必要とする統合テスト、または手動テストである場合、機能の作成にかかる時間が長くなります。これらのタイプのテストは、「外部ループ」の一部である必要があります。作成しているコードだけでなく、実行と検証に時間がかかる可能性のあるテスト。通常、これらのタイプの外部ループテストは、PRステージで実行されるか、ブランチへのマージ中に実行されます。

Developer Inner Loopは、開発者がコードを作成するときに実行するプロセスです。これは開発者ごと、言語ごとに異なりますが、通常はコード->ビルド->実行->繰り返しのようなものです。単体テストが内部ループに挿入されると、開発者は作成しているコードから早期のフィードバックと結果を得ることができます。単体テストは非常に高速に実行されるため、テストの実行がこのループへの参入障壁と見なされるべきではありません。[Visual Studio Live Unit Testing](https://docs.microsoft.com/en-us/visualstudio/test/live-unit-testing-start?view=vs-2019)などのツール も、内部ループをさらに短縮するのに役立ちます。

## コードとしてのドキュメント

単体テストを書くことは、あなたが書いているコードの単位がどのように使われるべきかを示すための素晴らしい方法です。いくつかの点で、単体テストは、ビルドごとに実行される（または少なくとも実行される必要がある）ため、ドキュメントやサンプルよりも優れているため、古くなっていないという確信があります。単体テストも、簡単に実行できるように単純にする必要があります。
