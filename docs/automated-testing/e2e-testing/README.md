# E2Eテスト

※ オリジナル: https://microsoft.github.io/code-with-engineering-playbook/automated-testing/e2e-testing/

エンドツーエンド（E2E）テストは、最初から最後まで連携して動作する複数のサブシステムで構成される機能およびデータアプリケーションフローをテストするためのソフトウェアテスト方法です。

これらのシステムは、さまざまなチームや組織によってさまざまなテクノロジーで開発される場合があります。最後に、それらが一緒になって機能的なビジネスアプリケーションを形成します。したがって、単一のシステムをテストするだけでは不十分です。したがって、エンドツーエンドのテストでは、アプリケーションを最初から最後まで検証し、すべてのコンポーネントをまとめます。

![End to End Testing](./images/e2e-testing.png)

## なぜE2Eテストを行うのか[その理由]

多くの商用ソフトウェアアプリケーションシナリオでは、最新のソフトウェアシステムは、複数のサブシステムとの相互接続で構成されています。これらのサブシステムは、同じ組織内にある場合も、異なる組織のコンポーネントである場合もあります。また、これらのサブシステムは、現在のシステムと多少類似した、または異なるライフタイムリリースサイクルを持つことができます。その結果、サブシステムに障害や障害が発生した場合、ソフトウェアシステム全体に悪影響を及ぼし、システムが崩壊する可能性があります。

![E2E Testing Pyramid](./images/testing-pyramid.png)

上の図は、 [Kent C. Doddのブログ](https://blog.kentcdodds.com/write-tests-not-too-many-mostly-integration-5e8c7fff591c)のテストピラミッドであり [MartinFowlerのブログ](https://martinfowler.com/bliki/TestPyramid.html)と[Google Testing Blog](https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html)のピラミッドを組み合わせたものです。

テストの大部分はピラミッドの下部にあります。ピラミッドを上に移動すると、テストの数が少なくなります。また、ピラミッドを上っていくと、テストの作成、実行、および保守に時間がかかり、コストが高くなります。各タイプのテストは、その目的、アプリケーション、および対象となる領域によって異なります。さまざまなテストタイプの比較分析の詳細については、この[## ユニットvs統合vsシステムvsE2Eテスト](../README.md)のドキュメントを参照してください。

## E2Eテストデザインブロック[その内容]

![E2E Testing Design Framework](./images/e2e-blocks.png)

3つのカテゴリすべてを1つずつ調べます。

### ユーザー機能

ユーザー機能の構築の一環として、次のアクションを実行する必要があります。

- ソフトウェアシステムのユーザーが開始した機能、およびそれらの相互接続されたサブシステムを一覧表示します。
- どの関数でも、実行されたアクションと入力および出力データを追跡します。
- 異なるユーザー関数間に関係がある場合は、それを見つけます。
- さまざまなユーザー機能の性質、つまり、それらが独立しているか、再利用可能かを調べます。

### 条件

以下の活動は、ユーザー機能に基づいた建築条件の一部として実行する必要があります。

- すべてのユーザー機能について、一連の条件を準備する必要があります。
- タイミング、データ条件、およびユーザー機能に影響を与えるその他の要因は、パラメーターと見なすことができます。

### テストケース

テストケースを作成するには、次の要素を考慮する必要があります。

- すべてのシナリオで、ユーザー機能のすべての機能をテストするために1つ以上のテストケースを作成する必要があります。可能であれば、これらのテストケースは、AzDOで成功したビルドと失敗したビルドを追跡する標準のCI/CDビルドパイプラインプロセスを通じて自動化する必要があります。
- すべての条件は、個別のテストケースとして参加する必要があります。

## E2Eテストの適用[その方法]

他のテストと同様に、E2Eテストも正式な計画、テストの実行、および終了のフェーズを経ます。

E2Eテストは、次の手順で実行されます。

### 計画

- ビジネスおよび機能要件の分析
- テスト計画の作成
- テストケースの開発
- テスト用の環境設定のような本番環境
- テストデータの設定
- 終了基準を決定する
- システムに最も適したテスト方法を選択してください。さまざまなテスト方法の定義については、[テスト方法](./testing-methods.md)のドキュメントを参照してください。

### 前提条件

- システムテストは、参加しているすべてのシステムに対して完了する必要があります。
- 完全なアプリケーションとして機能するには、すべてのサブシステムを組み合わせる必要があります。
- テスト環境のような本番環境の準備ができている必要があります。

### テストの実行

- テストケースを実行する
- テスト結果を登録し、合格と不合格を決定します
- バグ報告ツールでバグを報告する
- バグ修正を再確認する

### テストクロージャ

- テストレポートの準備
- 終了基準の評価
- テストフェーズの終了

### テストメトリクス

品質メトリックをトレースすると、テストの現在のステータスに関する洞察が得られます。E2Eテストの一般的なメトリックは次のとおりです。

- **テストケースの準備状況**: 準備ができているテストケースの数とテストケースの総数。
- **頻繁なテストの進行状況**: 同じ期間のテストケースの目標数に対する、一貫した頻繁な方法で実行されたテストケースの数（毎週など）。
- **欠陥ステータス**: このメトリックは、テスト中に検出された欠陥のステータスを表します。欠陥は、欠陥追跡ツール（AzDOバックログなど）にログインし、重大度と優先度に従って解決する必要があります。したがって、このメトリックを追跡するには、重大度と優先度に応じたオープンおよびクローズの欠陥の割合を計算する必要があります。AzDOダッシュボードクエリを使用して、このメトリックを追跡できます。
- **テスト環境の可用性**: このメトリックは、エンドツーエンドのテストに使用されるテスト環境の期間と、スケジュールされた割り当て期間を追跡します。

## E2Eテストフレームワークとツール

### 1. Gauge Framework

![Gauge Framework](./images/gauge.jpg)

Gaugeは、E2Eテストを作成および実行するための無料のオープンソースフレームワークです。ゲージをユニークにするいくつかの重要な機能は次のとおりです。

- Markdownに基づくシンプルで柔軟で豊富な構文。
- テストコードを書くための一貫したクロスプラットフォーム/言語サポート。
- プラグインをサポートするモジュラーアーキテクチャ。
- データ駆動型の実行と外部データソースをサポートします。
- 保守可能なテストスイートの作成に役立ちます。
- Visual Studio Code、Intellij IDEA、IDEサポートをサポートします。
- html、json、およびXMLレポートをサポートします。

[Gauge Framework のWebサイト](https://gauge.org/)

### 2. Robot Framework

![Robot Framework](./images/robot.jpg)

Robot Frameworkは、一般的なオープンソースの自動化フレームワークです。フレームワークは、人間が読めるキーワードを利用して、簡単な構文を持っています。その機能は、PythonまたはJavaで実装されたライブラリによって拡張できます。

Robotは、開発者ツールと構文を除いて、Gaugeと同じ「長所」をたくさん共有しています。私たちの使用法では、Gaugeで提供されるVS Code Intellisenseは、Robotで提供されるものよりもはるかに安定していることがわかりました。また、Gaugeが提供する構文よりも構文が読みにくいことがわかりました。どちらのフレームワークでもマークアップベースのテストケース定義が可能ですが、Gauge構文はRobotよりも英語の文のように読みます。最後に、IntellisenseはGaugeテストケースのマークアップファイルに組み込まれます。これにより、開発者が許可した場合、実際のテスト定義の関数スタブが作成されます。ロボットフレームワークについても同じことは言えません。

[Robot Framework のWebサイト](https://robotframework.org/#introduction)

### 3. TestCraft

![TestCraft](./images/TestCraft-logo.png)

TestCraftは、コードレスのSeleniumテスト自動化プラットフォームです。その革新的なAIテクノロジーと独自のビジュアルモデリングにより、テストのメンテナンスのオーバーヘッドを排除しながら、テストの作成と実行を高速化できます。

テスターは、コーディングなしで完全に自動化されたテストシナリオを作成します。顧客はバグをより早く見つけ、より頻繁にリリースし、CI / CDアプローチと統合し、デジタル製品の全体的な品質を向上させます。これにより、完全なエンドツーエンドのテストエクスペリエンスが実現します。

[TestCraft のWebサイト](https://www.testcraft.io/?utm_campaign=SoftwareTestingHelp%20&utm_source=SoftwareTestingHelp&utm_medium=EndtoEndTestingPage) もしくは [Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=testcraft.build-release-task)から入手してください

### 4. Ranorex Studio

![Ranorex Studio](./images/ranorex-studio2.png)

**Ranorex Studio** は、デスクトップ、Web、およびモバイルアプリケーション向けの完全なエンドツーエンドのテスト自動化ツールです。コーディングをまったく行わずに、または完全なIDEを使用して、信頼性の高いテストをすばやく作成します。テストへの入力として、外部のCSVファイルまたはExcelファイル、あるいはSQLデータベースを使用します。

並列に、または組み込みのSeleniumWebDriverを備えたSeleniumグリッドでテストを実行します。RanorexStudioはCI/CDプロセスと統合して、品質を犠牲にすることなくリリースサイクルを短縮します。

**Ranorex Studio** テストは、AzDOのビルドパイプラインの一部として実行できるAzure DevOps（AzDO）とも統合されています。

[Ranorex Studio  のWebサイト](https://www.ranorex.com/ranorex-studio-test-automation/?utm_source=softwaretestinghelp&utm_medium=cpc&utm_campaign=softwaretestinghelp_what-is-end-to-end-testing)または [AzDOとの統合](https://www.ranorex.com/help/latest/interfaces-connectivity/azure-devops-integration/introduction/)について

### 5. Katalon Studio

![Katalon](./images/New-Logo-Katalon-Studio.png)

**Katalon Studio**は、DevOpsをサポートする、Web、API、モバイル、およびデスクトップのテストのための優れたエンドツーエンドの自動化ソリューションです。

Katalon Studioを使用すると、自動テストをCI / CDパイプラインに簡単に統合して、高品質を保証しながら製品をより迅速にリリースできます。Katalon Studioは、初心者から専門家までのユーザー向けにカスタマイズします。スパイ、記録、デュアルエディターインターフェース、カスタムキーワードなどの堅牢な機能により、ユーザーがテストを設定、作成、維持できるようになります。

SeleniumとAppiumの上に構築されたKatalonStudioは、標準化されたエンドツーエンドのテストを標準化するのに役立ちます。また、最も一般的なフレームワークに準拠しており、自動テストエコシステムの他のツールとシームレスに連携します。

Katalonは、Gartner、ITプロフェッショナル、および大規模なテストコミュニティによって承認されています。

> 注：この記事の執筆時点では、AzDO用のKatalonStudio拡張機能はLinuxでは使用できませんでした。

[Katalon Studio  のWebサイト](https://www.katalon.com/) もしくは [AzDOとの統合](https://docs.katalon.com/katalon-studio/docs/azure-devops-extension.html#installation)について

## 結論

プロセス、メトリック、ユニット、統合、E2Eテストの違い、推奨されるさまざまなE2Eテストフレームワークやツールなど、E2Eテストのさまざまな側面を学んだことを願っています。

ソフトウェアの商用リリースでは、E2Eテスト検証は、ネットワーク通信、ミドルウェア、バックエンドサービスの相互作用など、実際のユーザーを正確に模倣する環境でアプリケーション全体をテストするため、重要な役割を果たします。

最後に、E2Eテストは、そのようなテストケースを自動化するコストが高すぎて組織が負担できないため、手動で実行されることがよくあります。そうは言っても、各組織の最終的な目標は、e2eテストを可能な限り合理化して、プロセスに全自動および半自動のテストコンポーネントを追加することです。したがって、この記事にリストされているさまざまなE2Eテストフレームワークとツールが役に立ちます。

## 参考資料

- [ウィキペディア：ソフトウェアテスト](https://en.wikipedia.org/wiki/Software_testing)
- [ウィキペディア：ユニットテスト](https://en.wikipedia.org/wiki/Unit_testing)
- [ウィキペディア：統合テスト](https://en.wikipedia.org/wiki/Integration_testing)
- [ウィキペディア：システムテスト](https://en.wikipedia.org/wiki/System_testing)
