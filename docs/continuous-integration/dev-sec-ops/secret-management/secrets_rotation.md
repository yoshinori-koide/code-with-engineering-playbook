# シークレットローテーション

シークレットローテーションは、アプリケーションで使用されるシークレットを更新するプロセスです。Azureサービスに対して認証するための最良の方法は、マネージIDを使用することですが、それがオプションではないシナリオもあります。そのような場合、アクセスキーまたはシークレットが使用されます。アクセスキーまたはシークレットを定期的にローテーションする必要があります。

## なぜ秘密のローテーション

シークレットは資産であるため、漏洩したり盗まれたりする可能性があります。シークレットをローテーションすることで、侵害された可能性のあるシークレットを取り消します。したがって、シークレットは頻繁にローテーションする必要があります。

## マネージドID

Azureマネージド ID は、個々のリソースを識別するためにAzureによって自動的に発行され、シークレットとパスワードの代わりに認証に使用できます。管理対象IDを使用することの魅力は、秘密と資格情報の管理を排除することです。開発者のマシンでは必要なく、ソース管理にチェックインする必要もありません。また、ローテーションする必要もありません。管理されたIDは、他のIDよりも安全であると見なされ、推奨される選択です。

## シークレットローテーションの適用

Azure Managed Identity を使用できない場合。このセクションと次のセクションでは、シークレットのローテーションを実現する方法について説明します。

シークレットの頻繁なローテーションを促進するには-自動化された定期的なシークレットローテーションプロセスを定義します。シークレットローテーションプロセスにより、アプリケーションを再起動して新しいシークレットを導入するときにダウンタイムが発生する可能性があります。そのための一般的な解決策は、ブルー/グリーンシークレットローテーションとも呼ばれる2つのバージョンのシークレットを使用できるようにすることです。2番目のシークレットを手元に用意することで、前のシークレットが取り消される前に、そのシークレットを使用してアプリケーションの2番目のインスタンスを開始できるため、ダウンタイムを回避できます。

## シークレットローテーションフレームワークとツール

1. 1セットの認証クレデンシャルを使用するリソースのシークレットのローテーションについては、[ここをクリック](https://docs.microsoft.com/en-us/azure/key-vault/secrets/tutorial-rotation)してください
1. 2セットの認証クレデンシャルを持つリソースのシークレットのローテーションについては、[ここをクリック](https://docs.microsoft.com/en-us/azure/key-vault/secrets/tutorial-rotation-dual?tabs=azure-cli)してください

## 結論

シークレットを更新することは、アプリケーションにダウンタイムを発生させることなくシークレットをシークレットのままにするために重要です。
