# 推奨される方法

1. **Correlation Id**: 対話の開始時に一意の識別子を含めて、さまざまなシステムコンポーネントからの集約データを拘束し、全体的なビューを提供します。[相関ID](correlation-id.md)の使用に関するその他のガイドラインをお読みください。
1. サービスの状態が**監視されていること**を確認し、システムのパフォーマンスと動作に関する洞察を提供します。
1. **依存サービス**が適切に監視されていることを確認します。Redisキャッシュ、サービスバスなどの依存サービスのエラーと例外は、ログに記録して警告する必要があります。また、依存サービスに関連するメトリックをキャプチャしてログに記録する必要があります。

    - さらに、**依存サービス**の障害は、ヘルスチェックによってスタックの各レベルに伝播する必要があります。

1. **障害、クラッシュ、および障害** は、個別のイベントとしてログに記録されます。これは、エンジニアが障害時に問題のある領域を特定するのに役立ちます。
1. ロギング構成（例：ロギングを「詳細」に設定）をコードを変更せずに制御できることを確認します。
1. レイテンシと期間に関する**メトリック**が収集され、集約できることを確認します。
1. 小規模から始めて、顧客に影響がある場所を追加します。[メトリックの疲労を回避すること](pitfalls.md#metric-fatigue)は、実用的なデータを収集するために非常に重要です。
1. 収集されるすべてのデータに、関連性のある豊富なコンテキストが含まれていることが重要です。
1. 個人を特定できる情報やその他の顧客の機密情報は決して記録しないでください。地域のプライバシーデータ規制には特別な注意を払う必要があり、収集されたデータはそれらに準拠する必要があります。（例：GPDR）
1. **ヘルスチェック**：サービスが正常でトラフィックを処理する準備ができているかどうかを判断するには、適切なヘルスチェックを追加する必要があります。kubernetesプラットフォームでは、Liveness、Readiness、Startupなどのさまざまなタイプのプローブを使用して、デプロイされたサービスの正常性と準備状況を判断できます。

監視可能なシステムを設計および構築する際に注意すべき点を理解するには、[こちら](pitfalls.md)をお読みください。
