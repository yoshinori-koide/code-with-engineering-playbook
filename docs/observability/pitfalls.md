# 監視可能なシステムを構築する際の注意事項

## 後付けとしての可観測性

システムを構築する際の設計目標の1つは、システムの監視を可能にすることです。これは、設計および開発時にアプリケーションの可用性、ロギング、およびメトリックを計画および検討するのに役立ちます。可観測性は、開発者にシステムの鳥瞰図を提供する優れたデバッグツールとしても機能します。インストルメンテーションとメトリックのログ記録を最後まで残すことにより、開発チームは開発中に貴重な洞察を失います。

## メトリック疲れ

1. *できること* **ではなく**、*必要なもの* を収集して測定することをお勧めします。すべてを監視しようとしないでください。
2. データが実用的でない場合、それは役に立たず、ノイズになります。それどころか、うまくいかない可能性のあるすべてのシナリオを予測することは非常に難しい場合があります。
3. 必要なものを収集することと、システム内のすべてのアクティビティをログに記録することの間には、バランスが必要です。一般的な経験則は、これらの原則に従うことです

   - インシデントをキャッチするルールは、シンプルで、関連性があり、信頼できるものでなければなりません
   - 収集されたが集計もアラートもされていないデータは、それでも必要な場合は確認する必要があります。

## コンテクスト

ログに記録されるすべてのデータには、リッチコンテキストが含まれている必要があります。これは、システムの全体像を把握し、トラブルシューティング中にエラーや障害を簡単に追跡するのに役立ちます。データをログに記録するときは、データのサイロを回避するようにも注意する必要があります。

## 個人を特定できる情報

原則として、顧客の機密情報および個人情報（PII）をログに記録しないでください。PII（例：GDPRなど）に関して関連するプライバシー規制が遵守されていることを確認します。機密データをログに記録しないようにする方法について詳しくは、[こちら](logs-privacy.md)をご覧ください。
