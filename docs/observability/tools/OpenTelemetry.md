# OpenTelemetry

OpenTelemetry は、トレースメトリックやログなどのテレメトリデータの収集、処理、および調整に使用できるAPI、SDK、およびインストルメンテーションのセットです。複数の言語（Java、.NET、Python、JavaScript、Golang、Erlangなど）をサポートしています。オープンテレメトリは、テレメトリデータの収集と管理について、ベンダーにとらわれない標準ベースのアプローチに従います。注意すべき重要な点は、OpenTelemetryには独自のバックエンドがないことです。OpenTelemetryCollectorによって収集されたすべてのテレメトリは、Prometheusなどのバックエンドに送信する必要があります。OpenTelemetryは、Kubernetesに次ぐ2番目にアクティブなCNCFプロジェクトでもあります。

## コレクタ

OpenTelemetry Collectorは、テレメトリの収集、処理、およびエクスポートを実行します。ほとんどの場合、アプリケーションのエージェントまたはサイドカーとして実行されるか、ホストに直接インストールされている場合はデーモンとして実行されます。コレクターは標準ベースであり、多くの統合をサポートしているため、メトリック、トレース、およびログ用の多くのツール固有のエージェントを単一のOpenTelemetryコレクターに置き換えることができる可能性があります。コレクターは、複数のアプリケーションからテレメトリデータを受信するためのスタンドアロンサービスとしてインストールすることもできます。

## インストルメンテーションライブラリ

別のライブラリの可観測性を可能にするライブラリは、インストルメンテーションライブラリと呼ばれます。OpenTelemetryライブラリは言語固有であり、現在、Java、Python、Javascript、dotnet、golangが適切にサポートされています。自動インストルメンテーションのサポートは、OpenTelemetryの使用を簡単かつ簡単にする一部のライブラリで利用できます。自動インストルメンテーションが利用できない場合は、OpenTelemetrySDKを使用して手動インストルメンテーションを構成できます。

## OpenTelemetryの統合

OpenTelemetryを使用して、データを収集し、処理して、複数のバックエンドにエクスポートできます。OpenTelemetryでサポートされている一般的な統合には、次のようなものがあります。

1. Zipkin
2. Prometheus.
3. Jaeger
4. New Relic.
5. Azure Monitor

## OpenTelemetryを使用する理由

OpenTelemetryを使用する主な理由は、複数の統合をサポートする単一のエージェントを介して、トレース、メトリック、およびロギングテレメトリを提供することです。OpenTelemetryを使用する場合は、トレース、ロギング、およびメトリック用に個別のエージェントを設定する必要はありません。OpenTelemetryを使用する適切な理由には、スタックがOpenCensusまたはOpenTracingを使用しているかどうかが含まれます。OpenCensusとOpenTracingはOpenTelemetryに道を切り開いたので、OpenCensusまたはOpenTracingがまだ下位互換性を持っているので、OpenTelemetryを導入することは理にかなっています。カスタム属性の追加、サンプリング、メトリックとトレースのデータの収集などの機能とは別に、OpenTelemetryは仕様に準拠し、Microsoft、Splunk、AppDynamicsなどの可観測性ランドスケープの大手企業をバックアップします。

## OpenTelemetryプロジェクトの現状

OpenTelemetryは、2019年にOpenCensusとOpenTracingを統合したことから生まれたプロジェクトです。OpenCensusとOpenTracingは凍結されており、新しい機能は開発されていませんが、OpenTelemetryはOpenCensusおよびOpenTracingと下位互換性があります。OpenTelemetryの一部の機能はまだベータ版であり、さまざまな言語の機能サポートがここで追跡されています：[OpenTelemetryの機能ステータス](https://github.com/open-telemetry/opentelemetry-specification/blob/main/spec-compliance-matrix.md)。OpenTelemetryプロジェクトのステータスは[ここ](https://opentelemetry.io/status/)で追跡できます。

## 注意すべき点

OpenTelemetryはごく最近のプロジェクト（2020年にリリースされた一部の機能の最初のGAバージョン）であるため、多くの機能はまだベータ版であり、本番環境でそのような機能を使用する前にデューデリジェンスを行う必要があります。また、OpenTelemetryは多くの一般的な言語をサポートしていますが、すべての言語の機能は同等ではありません。一部の言語は、他の言語と比較してより多くの機能を提供します。一部の機能はGAに含まれていないため、これも呼び出す必要があります。ツールとの非互換性の問題がある可能性があります。そうは言っても、OpenTelemetryはCNCFの最も活発なプロジェクトの1つであるため、まもなくさらに多くの機能がGAに到達すると予想されます。

## 参考文献

- [OpenTelemetry 公式サイト](https://opentelemetry.io/)
- [dotnet と OpenTelemetryの使用開始](https://opentelemetry.io/docs/net/getting-started/)
- [OpenTelemetry Collectorの使用](https://opentelemetry.io/docs/collector/getting-started/)
